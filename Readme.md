# GPT TTRPG Simulator

## Setup
Clone the repo and install the requirements:
```bash
pip install -r requirements.txt
```

Then create a `.env` file with the following content:
```bash
OPENAI_API_KEY=your-api-key
```
You can create an API key [here](https://platform.openai.com/api-keys).

## Usage
Run the script with the following command:
```bash
python main.py
```

If you want to create a new story, delete the following files:
- `ttrpg.md`
- `messages.json`
- `notes.json`


## Example Output
Here is an example output generated by the script:
```markdown
### **"Time's Tapestry"**

**Genre:** Time-Traveling Adventure

---

#### **Premise**
The very fabric of time has begun to unravel, causing chaos throughout history. Players are "Weavers," individuals chosen to repair the Tear in Time: a mysterious portal that links different eras. They must journey to various periods in history, fix anomalies, and prevent an impending catastrophe that threatens to erase existence itself.

---

### **Character Creation**
**Step 1: Choose a Time Era**
- **Distant Past**: Warriors, hunters, supporting a primitive society.
- **Classical Age**: Philosophers, diplomats, artisans in a thriving civilization.
- **Medieval Era**: Knights, mages, rogues in a world of kingdoms.
- **Modern Day**: Detectives, scientists, pilots in a contemporary setting.
- **Future**: Cyber-enhanced warriors, explorers of cosmic realms.

**Step 2: Assign Attributes**
You have 10 points to distribute among **three attributes** (max 5 in any):
- **Strength**: Physical power and endurance.
- **Intellect**: Problem-solving skills and creativity.
- **Charm**: Persuasiveness and social prowess.

**Step 3: Choose a Skill**
Select a special skill that reflects your time era:
- **Combat Expert**: Bonus to Strength actions in battles.
- **Diplomat**: Bonus to Charm actions with NPCs.
- **Technomancer**: Bonus to Intellect when dealing with technology.
- **Scholar**: Bonus to Intellect when studying historical texts or artifacts.

---

### **Mechanics**
#### **Core Mechanic**
When performing an action, roll a 6-sided die (1d6). Add the relevant attribute (Strength, Intellect, or Charm). Compare the result to the Difficulty Target (DT) of the task:

- **DT 3**: Simple task
- **DT 5**: Average task
- **DT 7**: Challenging task
- **DT 9**: Very difficult task

**Success**: If the result meets or exceeds the DT, you succeed. Otherwise, face a consequence.

#### **Combat**
- Each character rolls 1d6 + Strength for melee or 1d6 + Charm for ranged attacks.
- If the total exceeds the opponent�s defensive score (DT 4 for minor foes, DT 6 for major foes), you deal damage. Most adversaries have **3 health**.
- You start with **5 health**. Reaching 0 health means you are incapacitated until revived.

#### **Time Manipulation**
- Players can manipulate time by spending **Time Points**. You begin with 3 Time Points and regain 1 point after an adventure.
- Use a Time Point to:
  - **Rewind**: Reroll a failed action (you must keep the new result).
  - **Fast Forward**: Skip a challenge or encounter.
  - **Echo**: Remember a past event, asking the GM a question about it.

---

### **Adventure Framework**
#### **Traveling Through Time**
- The GM describes historical settings the players will visit, including unique challenges and quests.
- Players must solve anomalies�errors in historical timelines, such as a historical figure going missing or technology appearing too early.

#### **Sample Anomalies**
1. **Missing King**: In the Medieval Era, a powerful king has disappeared. Players must investigate the king�s chambers, question nobles, and recover stolen artifacts to restore order.
2. **Forgotten Invention**: In the Modern Day, a scientist is on the verge of a groundbreaking discovery. Players must ensure he completes his work before time is altered.
3. **Ancient Battle**: In the Classical Age, a battle is waged with incorrect strategies. Players can influence the outcome to ensure history remains intact.

#### **Goals**
- **Repair Time Loops**: Fix anomalies to close the Tear in Time, gathering artifacts to stabilize the portal.
- **Confront the Time Thief**: A mysterious figure seeks to exploit the Tear in Time for their own gain. Players must track and confront them before they wreak havoc across history.

---

### **Advancement**
After completing time-sensitive missions or significant challenges:
- Gain 1 more point to distribute to your attributes (max 6).
- Learn a new skill related to your time era.
- Recover all lost health and Time Points.

---

### **Conclusion**
"Time's Tapestry" invites players to jump through history, face historical challenges, and preserve the timeline while honing their skills and crafting a narrative that echoes through the ages. Every roll counts, as the fate of time itself hangs delicately in the balance!

GM: Wonderful! Let's begin your adventure in "Time's Tapestry."

### Step 1: Choose a Time Era
Please select a time era for your character:
- **Distant Past**
- **Classical Age**
- **Medieval Era**
- **Modern Day**
- **Future**

What will it be?

You: Modern Day

GM: Great choice! You’ll be navigating the complexities of the Modern Day.

### Step 2: Assign Attributes
You have 10 points to distribute among the following attributes (max 5 in any):
- **Strength**
- **Intellect**
- **Charm**

How would you like to distribute your points?

You: Strength: 5, Intellect: 1, Charm: 4

GM: Your attributes have been set up beautifully!

- **Strength**: 5
- **Intellect**: 1
- **Charm**: 4
- **Health**: 5
- **Time Points**: 3

### Step 3: Choose a Skill
Select a special skill that reflects your character in the Modern Day:
- **Combat Expert**: Bonus to Strength actions in battles.
- **Diplomat**: Bonus to Charm actions with NPCs.
- **Technomancer**: Bonus to Intellect when dealing with technology.
- **Scholar**: Bonus to Intellect when studying historical texts or artifacts.

Which skill will you choose?

You: combat expert

GM: You've chosen the **Combat Expert** skill! This will give you a bonus to your Strength actions in battles.

### Character Summary
- **Era**: Modern Day
- **Attributes**:
  - Strength: 5
  - Intellect: 1
  - Charm: 4
- **Skill**: Combat Expert
- **Health**: 5
- **Time Points**: 3

---

### Adventure Begins!
The fabric of time is trembling, and you find yourself in a bustling city in the modern day, filled with skyscrapers and technology. You're approached by a frantic scientist, Dr. Elara Sparks, who tells you about an anomaly: a revolutionary invention of hers—a device that could change the world—has gone missing.

Dr. Sparks fears that if her invention isn’t recovered, it could alter the timeline irrevocably. You realize, this could be your chance to prevent a catastrophe.

"What can I do to help?" she pleads.

What would you like to do?

You: I say "I don't know I'm not good at plans. You tell me what to do" 

GM: Dr. Elara Sparks takes a deep breath, her eyes wide with urgency. "Alright, we need to act quickly! Here's what we can do:"

1. **Investigate My Lab**: Perhaps there's a clue to who stole the device or how it went missing.
2. **Ask Around the Neighborhood**: I could use your charm to speak with the locals or security cameras that might have recorded the theft.
3. **Check Online**: We might be able to track down anyone who has posted about the invention or any suspicious activity around my lab.

"Which direction should we take?" she asks, hopeful that your choice will lead to a breakthrough.

What do you want to do?

You: Let's investigate your lab first

GM: Dr. Elara nods vigorously and leads you through the bustling city streets to her lab. The lab is a sleek, high-tech facility filled with gadgets and blinking screens. As you enter, she shows you around, but her face is etched with worry.

"Look around, see if anything seems out of place," she urges. "I need you to check my workstation while I review the security footage."

You scan the lab, searching for clues.

What do you want to do? You can:
- Examine the **workbench** for any signs of struggle or missing items.
- Look for any notable **documents** or **computer files** that might provide information.
- Search for **hidden compartments** or **secret passages**.

What will you choose?

You: Do I see anyone else in the lab?

GM: You take a moment to observe the lab closely. Apart from Dr. Elara, the lab is deserted. The humming of the machines fills the silence, and the only movement is the flickering lights from computer screens. The atmosphere is tense, and you can sense Dr. Elara’s urgency amplifying your focus.

With no one else present, you can concentrate fully on investigating.

So, what do you want to look into?
- Examine the **workbench** for signs of struggle or missing items.
- Look for any notable **documents** or **computer files** that might provide information.
- Search for **hidden compartments** or **secret passages**.

What will you choose?

You: Hmm, I'll look around for secret compartments or passages

GM: You begin your search for hidden compartments or secret passages, feeling the thrill of discovery. You carefully examine the walls, the shelves, and even the floor.

As you inspect a bookshelf filled with thick tomes and research papers, you notice one of the books is slightly askew. You pull it out, and to your surprise, a section of the bookshelf shifts, revealing a small hidden compartment!     

Inside, you find a few items:
1. A **keycard** labeled "Restricted Access - Lab 4."
2. A small **notebook** with scribbles, looking like hastily made notes. The scrawl mentions individuals in the area and strange activities: "Unmarked vehicles at night," and "Someone is watching."

With an adrenaline rush, you show the items to Dr. Elara, who looks intrigued!

"This keycard could give us access to restricted areas, and that notebook may have information about who took my invention!" she exclaims.

What do you want to do next?
- Use the **keycard** to access restricted areas in the lab.
- Investigate the **notebook** further to decode the scrawled notes.
- Share this information with Dr. Elara and decide on the next steps.

What will you choose?

You: Use teh keycard to get into restricted areas

GM: Dr. Elara nods in agreement and leads you toward a secured door at the end of the lab, marked "Authorized Personnel Only." You swipe the keycard through the scanner, and after a moment, a green light flashes, unlocking the door with a soft beep.

The door swings open to reveal a dimly lit hallway lined with metal doors that have various labels. The air is charged with anticipation as you step inside, scanning your surroundings.

**What would you like to do in the restricted areas?**
- Check the first door labeled **"Experimental Tech."**
- Open the second door marked **"Storage."**
- Investigate the third door with a sign that says **"Secure Archives."**

Which door will you choose to open?

You: Storage

GM: You approach the door marked **"Storage"** and pull it open. The room inside is filled with shelves stacked high with equipment, old prototypes, and various materials. The scent of metal and chemicals hangs in the air.

As you begin to sift through the items, you notice:
- A **large crate** labeled "DO NOT OPEN - EXPERIMENTAL."
- A few **boxes** filled with tools and gadgets.
- A **mysterious bag**, slightly open, that seems out of place.

What would you like to investigate further?
- The **large crate** labeled "DO NOT OPEN."
- The **boxes** of tools and gadgets for something useful.
- The **mysterious bag** to see what's inside.

What will you choose?

You: open the large crate labeled DO NOT OPEN - EXPERIMENTAL. 

GM: Ignoring the warning, you approach the large crate with a mix of excitement and apprehension. You pry open the lid, and inside, you find a collection of strange items:

1. **Advanced Technology**: A small, portable device that pulsates with a blue light. It resembles a time-manipulation gadget, similar to the one you’ve heard about in folklore among time travelers.
2. **Old Newspaper Clippings**: These articles detail strange happenings in the city—people claiming to see flashes of light and strange figures lurking in shadows.
3. **A Hidden Compartment Inside the Crate**: Further inside the crate, you discover a hidden compartment containing a **miniature drone** and what looks like a **remote control**.

Dr. Elara peers over your shoulder, her eyes widening. "This technology could be key in tracking down who took my invention! The drone could help us scout the area."

What do you want to do next?
- Take the **portable device** for later use.
- Use the **drone** to scout the area with the **remote control**.
- Look through the **old newspaper clippings** further for leads.

What’s your choice?

You: take the portable device

GM: You carefully retrieve the **portable device**, tucking it safely away for future use. Its potential for time manipulation intrigues you, and it might just be the tool you need to navigate the challenges ahead.

Dr. Elara looks impressed. "That might be crucial if we need to manipulate situations in our favor. But for now, we should focus on finding my invention."

Having searched the storage room, you feel ready to explore further.

What would you like to do next?
- Return to the main lab and consult with Dr. Elara about the next steps.
- Investigate another restricted area, like the **Experimental Tech** or **Secure Archives**.
- Use the **drone** remotely to scout the area around the lab.

What’s your next move?

You: use teh drone to scout the area

GM: You pull out the drone along with the remote control and explain your plan to Dr. Elara. She nods in agreement, excitement flickering in her eyes.

You power on the drone, and it hums to life, the small camera eye blinking as it prepares for takeoff. You guide it outside the lab and into the busy streets, maneuvering it gently through traffic and over the familiar cityscape.      

As you scout the area, you see:
- A **dark van** parked a few blocks away, its windows tinted and suspicious.
- People walking, oblivious to the drone hovering above them.
- The sunlight reflecting off something shiny near the entrance of a small alley.

What would you like to investigate further with the drone?
- Focus on the **dark van** to see if there's anyone inside.
- Zoom in on the **shiny object** in the alley to see what it is.
- Return to the lab and report your findings to Dr. Elara.

What’s your decision?

You: focus on the dark van

GM: You steer the drone toward the **dark van**, hovering just above it to get a better look. As the camera focuses on the vehicle, you can see a figure inside—shrouded in shadow, but unmistakably fiddling with something on the dashboard.

Suddenly, the figure glances around, scanning the area, as if they can sense the drone's presence. Your heart races as you realize the figure might be connected to the disappearance of Dr. Elara's invention!

You also notice:
- A **large bag** in the passenger seat, possibly containing stolen items.
- The van's license plate has been altered or scratched, making it difficult to trace.

What would you like to do next with the drone?
- Try to get a closer shot of the **figure** and their actions.
- Investigate the **bag** to determine if it's related to the stolen invention.
- Maneuver the drone back to **safety** before you're detected.

What will you do?

You: try to get a closer shot

GM: You cautiously maneuver the drone closer to the **dark van**, intent on capturing a clearer view of the figure inside. Your heart races as you inch the drone forward, keeping a watchful eye on the figure’s movements.

As you zoom in, you catch a glimpse of their face—a masked individual with an expression of determination. They are now focused on the dashboard and seem to be typing something into a small device.

Suddenly, the figure looks directly at the drone! You realize this might be your last chance before you're spotted.

You manage to snap a few quick photos of the figure and what they’re doing before quickly pulling the drone back, retreating to a safe distance.

What would you like to do now?
- Return to the lab to share your findings with Dr. Elara.
- Attempt to follow the **dark van** using the drone to see where it goes.
- Analyze the photos you've taken for any useful information.

What’s your choice?

You: attempt to follow the dark van!

GM: With determination, you guide the drone to follow the **dark van** as it begins to slowly pull away from the curb. You carefully maneuver the drone above and behind it, making sure to keep a safe distance while remaining undetected.

The van weaves through the busy streets, and your heart pounds in excitement. It turns left and heads towards a less populated industrial area, where the buildings are sprawling and rundown. You notice the van make a few turns, and it eventually pulls into a large, seemingly abandoned warehouse.

As you hover above the warehouse, you can see:
- A couple of other **suspect vehicles** parked nearby.
- The entrance is **shuttered** but there’s a side door that appears slightly ajar.

What would you like to do next with the drone?
- Investigate the **side door** to see if anyone is coming or going.
- Zoom in on the **other vehicles** to gather more details.
- Pull the drone back and return to the lab to report your findings to Dr. Elara.

What will you do?

You: pull the drone back and report my findings

GM: You carefully maneuver the drone back, ensuring it's safely out of sight as you return to the lab. Once inside, you power down the drone and share your findings with Dr. Elara.

"That van, it led me to a warehouse," you explain, excitement lacing your words. "There were a couple of vehicles parked out front, and the side door was ajar. I caught a glimpse of a masked figure inside, and they seemed to be working on something at the dashboard."

Dr. Elara’s expression shifts from worry to determination. "We need to investigate that warehouse! It's likely they have my invention. If they're connected with whoever is tampering with the timeline, we can't let them get away with it."

With a shared glance of resolve, you both prepare to head to the warehouse.

**What would you like to do as you approach the warehouse?**
- Suggest a **stealthy approach** to avoid detection.
- Plan an **altercation** if things get dangerous.
- Look for **additional resources** in the lab to help you before heading out.

What’s your plan?

You: plan an altercation!

GM: Dr. Elara raises an eyebrow at your bold suggestion, a spark of excitement in her eyes. "Alright, if we’re going in with force, we must be prepared. I’ll gather some equipment that might help us defend ourselves."

She quickly retrieves a couple of items from the lab:
- A **small stun gun**: a non-lethal way to incapacitate an enemy.
- A **flashlight** with a blinding strobe function: useful for disorienting foes.

After equipping yourselves, you both head to the warehouse, your hearts racing as you approach the entrance. The surrounding atmosphere is tense, but the thrill of the impending confrontation drives you forward.

As you reach the side door, you notice it’s slightly open, providing just enough space for you to slip inside.

**What would you like to do now?**
- **Enter the warehouse** cautiously, ready for a fight.
- **Listen** at the door first to gauge the situation inside.
- Create a **distraction** outside to draw attention away from your entry.

What’s your next move?

You: enter the wearhouse ready for a fight

GM: You push the door open quietly, ready for whatever awaits inside. The air is heavy with dust and a mixture of metallic scents as you step into the dimly lit warehouse.

Inside, the vast space is filled with crates and old machinery, forming narrow paths around the stacked items. In one corner, you can see a **large worktable** cluttered with gadgets and tools. The atmosphere is tense, and the dim lighting casts eerie shadows.

As you move cautiously forward, you hear voices coming from deeper within the warehouse. Peering around a stack of crates, you spot two masked figures discussing something urgently.

One figure holds a device similar to the one Dr. Elara invented, but it looks modified for dubious purposes. The other figure points towards a door at the far end of the warehouse.

You have the opportunity to act before they notice you!

**What would you like to do?**
- **Launch a surprise attack** on the figures.
- **Create a distraction** to draw them away from the worktable.
- **Attempt to sneak around** to gather more information or locate the invention.

What’s your strategy?

You: launch a surprise attack

GM: With adrenaline pumping through your veins, you decide to act quickly. You position yourself for a surprise attack, readying your stun gun as you leap from behind the crates.

As you charge at the two masked figures, they barely have time to react. You aim for the nearest one, your combat training kicking in.

I'm going to roll a d6 for your attack to see if you hit them successfully!

*Rolling the die...*


GM: You rolled a **1**. Adding your Strength bonus of **5**, that brings your total to **6**!

The attack is successful! You spring toward the nearest figure and deliver a stunning blow with your stun gun. The figure reels back in shock, and you can see the panic in their eyes as they collapse, incapacitated.

The second figure, seeing their partner go down, draws out a weapon, clearly alarmed and ready to defend themselves.

**What would you like to do next?**
- **Charge at the second figure** for another direct attack.
- **Use the flashlight** to blind them and disorient the attacker.
- **Retreat** slightly to take cover and plan your next move.

What’s your strategy?

You: charge at the second figure and hit him in the gut

GM: Fueled by adrenaline and the success of your first attack, you charge at the second figure, aiming a powerful hit directly at their gut. Your swift movements catch them off guard as they scramble to react.

Let’s roll a d6 to see if your attack hits successfully! *Rolling the die...*


GM: You rolled another **1**. Adding your Strength bonus of **5**, your total for this attack is **6**!

You land a solid punch right in the figure's gut, knocking the wind out of them. They double over, gasping for breath and unable to retaliate. The adrenaline rush fills you with confidence as you take control of the situation.

Both figures are now incapacitated on the ground, and you have a moment to assess your surroundings. The worktable is still within sight, and you can now see the device that resembles Dr. Elara's invention lying there.

What would you like to do next?
- **Secure the figures** to ensure they don’t escape.
- **Investigate the worktable** to see if the device can be salvaged or if there’s more information to gather.
- **Search their belongings** for clues related to the theft or other plans.

What’s your next move?

You: secure the figures so they don't escape. Dr. Elara can investigate.

GM: You quickly assess the situation and decide it’s best to secure the incapacitated figures. You bind their hands using some spare materials found around the warehouse, ensuring they won’t escape or be able to retaliate.

Dr. Elara, seeing you handle the two figures, approaches with a determined look. “Excellent work! I’ll take a look at the device and gather information from these two.”

She moves to the worktable, examining the modified creation, while you keep guard over the secured figures.

After a short while, Dr. Elara turns to you with an excited expression. “This device! I can reverse the modifications they made. It’ll still take time, but we’re one step closer to restoring the original timeline!”

As she works, the captured figures simmer with frustration, their masked faces unable to betray their emotions.

What would you like to do next?
- **Question the captured figures** to find out more about who sent them.
- **Assist Dr. Elara** in her work on the device.
- **Search the warehouse** for additional clues or hidden items.

What’s your decision?

You: Question the captured figures

GM: You step closer to the two bound figures, ready to extract information. Their expressions are masked, but you can sense their unease. You decide to initiate the questioning.

“Who sent you?” you demand, your voice firm. “What do you want with Dr. Elara’s invention?”

One of the figures remains silent, but the second one shifts uncomfortably. It seems they can sense the urgency in your tone. Dr. Elara stops her work, listening intently.

You can see the figure weighing their options, perhaps deciding if they’re willing to talk.

What would you like to say or do to encourage them to speak?
- Threaten them to force a confession.
- Offer them a chance to **reveal information** in exchange for leniency.
- **Appeal to their reason**, suggesting cooperation would be in their interest.

What’s your approach?

You: Threaten them to force a confession

GM: You lean in closer, narrowing your gaze at the captured figures. “I won’t hesitate to make this worse for you if you don’t start talking. You have no idea the kind of trouble you’re in. Now, who sent you and what do you want with the invention?”

The tension in the air thickens as the figures exchange glances. After a moment of silence, the first figure, who had remained quiet, finally speaks, their voice shaky. “Alright! Alright! Just don’t hurt us any more than you have to!” 

They clear their throat, clearly nervous. “We were hired by a group called The Shadow Syndicate. They’re planning to use the invention to destabilize time itself for profit. We were only supposed to monitor Elara and report back!”     

Dr. Elara gasps at the mention of the Shadow Syndicate. “They’re a dangerous organization! We have to stop them!”

The other figure, realizing their partner has spoken, adds, “We were just following orders! Please... we can help you if you let us go!”

What do you want to do with this new information?
- **Decide to let them go in exchange for their help.**
- **Keep them secured** and report this information to authorities after you finish here.
- **Question them further** to gather more details about the Shadow Syndicate.

What’s your decision?

You: Question them further  

GM: You decide that getting more information will be crucial to addressing the threat of the Shadow Syndicate. “What else do you know?” you press, keeping your tone serious. “Who is behind it? What are their plans?”

The first figure looks at you, clearly realizing there’s no easy escape. “We don’t know all the details, but they have connections everywhere—politicians, scientists, even some rogue time travelers. They’re planning to use the invention to create fractures in time, allowing them to manipulate events to their advantage.”

“Who’s leading this group?” Dr. Elara interjects, her voice filled with urgency.

“Someone called **The Weaver**,” the second figure answers reluctantly. “A mastermind of sorts, pulling the strings from behind the scenes. They’ve been recruiting anyone with a talent for technology or combat. We were just small-time operatives, we swear!”

Dr. Elara exchanges a worried glance with you. “If the Weaver is running this, we need to handle this delicately. They won’t stop until they achieve their goals.”

What would you like to do with this information?
- **Plan a confrontation** with the Shadow Syndicate and find the Weaver.
- **Secure the area** and gather resources to strengthen your position.
- Decide to **release the figures** with the hope that they might help you against the Syndicate.

What’s your strategy?

You: ...
```

